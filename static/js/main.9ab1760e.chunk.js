(window.webpackJsonpp2folio=window.webpackJsonpp2folio||[]).push([[0],{15:function(e,t){},18:function(e,t,a){e.exports=a(32)},30:function(e,t){},31:function(e,t){},32:function(e,t,a){"use strict";a.r(t);var r,n,i,c=a(0),o=a.n(c),l=a(16),s=a.n(l),u=a(17),d=a(2),p=a(3),f=a(5),v=a(4),h=a(6),m=a(9),y=a.n(m),b=a(8),R=a.n(b),g=a(10),O=a.n(g);function k(e,t){var a=new FileReader;a.onerror=function(e){console.log(e)},a.onload=function(a){t(a,e.name)},a.readAsArrayBuffer(e)}function w(e){var t=new Uint8Array(e),a=O.a.read(t,{type:"array"});return a.Sheets[a.SheetNames[0]]}!function(e){e.XLSX=".xlsx",e.XLS=".xls",e.CSV=".csv",e.PDF=".pdf"}(r||(r={})),function(e){e.CZK="CZK",e.EUR="EUR"}(n||(n={})),function(e){e.MINTOS="mintos",e.TWINO="twino",e.ZONKY="zonky"}(i||(i={}));var j,P=a(7),F=a(1),T=function(){function e(){Object(d.a)(this,e),this.currency=void 0,this.monthlyResults=[],this.transactionLog=[],this.platformTotals=void 0,this.portfolioTotals=void 0}return Object(p.a)(e,[{key:"processTransactions",value:function(){var e=R()(0),t=!0,a=!1,r=void 0;try{for(var n,i=this.getTransaction()[Symbol.iterator]();!(t=(n=i.next()).done);t=!0){var c=n.value,o=c.processingDate;if(o.isAfter(e,"month")){var l=o.toArray(),s=R()("".concat(l[0],"-").concat(l[1]+1,"-01"),"YYYY-MM-DD");this.monthlyResults.unshift({month:s,result:this.getNewBaseResultFactory()}),e=s}for(var u=0,d=Object.entries(c.result);u<d.length;u++)for(var p=d[u],f=Object(P.a)(p,2),v=f[0],h=f[1],m=0,y=Object.entries(h);m<y.length;m++){var b=y[m],g=Object(P.a)(b,2),O=g[0],k=g[1];this.monthlyResults[0].result[v][O]=this.monthlyResults[0].result[v][O].add(k)}}}catch(w){a=!0,r=w}finally{try{t||null==i.return||i.return()}finally{if(a)throw r}}}},{key:"getPlatformTotals",value:function(){if(this.platformTotals)return this.platformTotals;var e=this.getNewBaseResultFactory(),t=!0,a=!1,r=void 0;try{for(var n,i=this.monthlyResults[Symbol.iterator]();!(t=(n=i.next()).done);t=!0)for(var c=n.value,o=0,l=Object.entries(c.result);o<l.length;o++)for(var s=l[o],u=Object(P.a)(s,2),d=u[0],p=u[1],f=0,v=Object.entries(p);f<v.length;f++){var h=v[f],m=Object(P.a)(h,2),y=m[0],b=m[1];e[d][y]=e[d][y].add(b)}}catch(R){a=!0,r=R}finally{try{t||null==i.return||i.return()}finally{if(a)throw r}}return this.platformTotals=e,this.platformTotals}},{key:"getPortfolioTotals",value:function(){if(!this.portfolioTotals){for(var e={deposit:Object(F.a)({currency:this.currency}),extraReceived:Object(F.a)({currency:this.currency}),feesPaid:Object(F.a)({currency:this.currency}),interestReceived:Object(F.a)({currency:this.currency}),principalReceived:Object(F.a)({currency:this.currency}),withdrawal:Object(F.a)({currency:this.currency})},t=this.getPlatformTotals(),a=0,r=Object.entries(t);a<r.length;a++)for(var n=r[a],i=Object(P.a)(n,2),c=i[0],o=i[1],l=0,s=Object.entries(o);l<s.length;l++){var u=s[l],d=Object(P.a)(u,2)[1];e[c]=e[c].add(d)}this.portfolioTotals=e}return this.portfolioTotals}}]),e}();!function(e){e.Date="ProcessingDate",e.TransactionId="TransactionId",e.TransactionType="TransactionType",e.PaymentType="PaymentType",e.LoanId="LoanId",e.ProcessingAmount="ProcessingAmount"}(j||(j={}));var E,D=function(e){function t(){var e,a;Object(d.a)(this,t);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return(a=Object(f.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(i)))).currency=n.EUR,a}return Object(h.a)(t,e),Object(p.a)(t,[{key:"parseASFile",value:function(e){var a=w(e),r=O.a.utils.sheet_to_json(a,{header:t.dataColumnHeader,raw:!1,blankrows:!1,defval:0,range:3});this.transactionLog=r.reverse()}},{key:"getTransaction",value:y.a.mark(function e(){var t,a,r,n,i,c,o,l;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=!0,a=!1,r=void 0,e.prev=3,n=this.transactionLog[Symbol.iterator]();case 5:if(t=(i=n.next()).done){e.next=14;break}return c=i.value,o=R()(c[j.Date],"MM/DD/YY HH:mm"),l=I(o),e.next=11,l;case 11:t=!0,e.next=5;break;case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(3),a=!0,r=e.t0;case 20:e.prev=20,e.prev=21,t||null==n.return||n.return();case 23:if(e.prev=23,!a){e.next=26;break}throw r;case 26:return e.finish(23);case 27:return e.finish(20);case 28:case"end":return e.stop()}},e,this,[[3,16,20,28],[21,,23,27]])})},{key:"getNewBaseResultFactory",value:function(){return{deposit:{},extraReceived:{},feesPaid:{},interestReceived:{},principalReceived:{},withdrawal:{}}}}],[{key:"isPlatformFileValid",value:function(e){return e.startsWith(t.platformFilenameSubstring)&&e.endsWith(t.platformFileType)}}]),t}(T);D.platform=i.TWINO,D.platformFilenameSubstring="account_statement",D.platformFileType=r.XLSX,D.dataColumnHeader=[j.Date,j.TransactionId,j.TransactionType,j.PaymentType,j.LoanId,j.ProcessingAmount],function(e){e.Date="ProcessingDate",e.Direction="Direction",e.TransactionType="TransactionType",e.ProcessingAmount="ProcessingAmount",e.InterestReceived="InterestReceived",e.PrincipalReceived="PrincipalReceived"}(E||(E={}));var x,S=function(e){function t(){var e,a;Object(d.a)(this,t);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return(a=Object(f.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(i)))).currency=n.CZK,a}return Object(h.a)(t,e),Object(p.a)(t,[{key:"parseASFile",value:function(e){var a=w(e),r=O.a.utils.sheet_to_json(a,{header:t.ASFileColumnHeaders,raw:!1,blankrows:!1,defval:0,range:9});this.transactionLog=r}},{key:"getTransaction",value:y.a.mark(function e(){var t,a,r,i,c,o,l,s,u,d;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=!0,a=!1,r=void 0,e.prev=3,i=this.transactionLog[Symbol.iterator]();case 5:if(t=(c=i.next()).done){e.next=36;break}o=c.value,l=R()(o[E.Date],"DD.MM.YYYY"),s=I(l),u=this.getAmount(o[E.ProcessingAmount],n.CZK),e.t0=o[E.TransactionType],e.next="Poplatek za investov\xe1n\xed"===e.t0?13:"Nabit\xed va\u0161\xed pen\u011b\u017eenky"===e.t0?15:"V\xfdb\u011br z pen\u011b\u017eenky na v\xe1\u0161 \xfa\u010det"===e.t0?17:"Poplatek za prodej na sekund\xe1rn\xedm trhu"===e.t0?19:"Prodej na sekund\xe1rn\xedm trhu"===e.t0?21:"Vr\xe1cen\xed platby"===e.t0?23:"Spl\xe1tka p\u016fj\u010dky"===e.t0?26:31;break;case 13:return s.result.feesPaid.plaformFeePaid=u,e.abrupt("break",31);case 15:return s.result.deposit.deposit=u,e.abrupt("break",31);case 17:return s.result.withdrawal.withdrawal=u,e.abrupt("break",31);case 19:return s.result.feesPaid.secondaryMarketFeePaid=u,e.abrupt("break",31);case 21:return s.result.principalReceived.principalReceived=u,e.abrupt("break",31);case 23:return s.result.interestReceived.interestReceived=this.getInterestReceived(o[E.InterestReceived],n.CZK).multiply(-1),s.result.principalReceived.principalReceived=this.getPrincipalReceived(o[E.PrincipalReceived],n.CZK).multiply(-1),e.abrupt("break",31);case 26:return s.result.interestReceived.interestReceived=this.getInterestReceived(o[E.InterestReceived],n.CZK),s.result.principalReceived.principalReceived=this.getPrincipalReceived(o[E.PrincipalReceived],n.CZK),(d=u.subtract(s.result.principalReceived.principalReceived.add(s.result.interestReceived.interestReceived))).isZero()||(s.result.interestReceived.penaltyReceived=d),e.abrupt("break",31);case 31:return e.next=33,s;case 33:t=!0,e.next=5;break;case 36:e.next=42;break;case 38:e.prev=38,e.t1=e.catch(3),a=!0,r=e.t1;case 42:e.prev=42,e.prev=43,t||null==i.return||i.return();case 45:if(e.prev=45,!a){e.next=48;break}throw r;case 48:return e.finish(45);case 49:return e.finish(42);case 50:case"end":return e.stop()}},e,this,[[3,38,42,50],[43,,45,49]])})},{key:"getNewBaseResultFactory",value:function(){return{deposit:{deposit:Object(F.a)({currency:this.currency})},extraReceived:{},feesPaid:{plaformFeePaid:Object(F.a)({currency:this.currency}),secondaryMarketFeePaid:Object(F.a)({currency:this.currency})},interestReceived:{interestReceived:Object(F.a)({currency:this.currency}),penaltyReceived:Object(F.a)({currency:this.currency})},principalReceived:{principalReceived:Object(F.a)({currency:this.currency})},withdrawal:{withdrawal:Object(F.a)({currency:this.currency})}}}},{key:"getAmount",value:function(e,t){var a=e.length-(e.indexOf(".")+1),r=Math.abs(parseInt(e.replace(/,/g,"").replace(/\./g,""),10));return Object(F.a)({amount:r,precision:a,currency:t})}},{key:"getPrincipalReceived",value:function(e,t){var a=e.length-(e.indexOf(".")+1),r=Math.abs(parseInt(e.replace(/,/g,"").replace(/\./g,""),10));return Object(F.a)({amount:r,precision:a,currency:t})}},{key:"getInterestReceived",value:function(e,t){var a=e.length-(e.indexOf(".")+1),r=Math.abs(parseInt(e.replace(/,/g,"").replace(/\./g,""),10));return Object(F.a)({amount:r,precision:a,currency:t})}}],[{key:"isPlatformFileValid",value:function(e){return e.includes(t.platformFilenameSubstring)&&e.endsWith(t.platformFileType)}}]),t}(T);function I(e){return{processingDate:e,result:{deposit:{},extraReceived:{},feesPaid:{},interestReceived:{},principalReceived:{},withdrawal:{}}}}S.platform=i.ZONKY,S.platformFilenameSubstring="transakce-",S.platformFileType=r.XLSX,S.ASFileColumnHeaders=[E.Date,E.Direction,E.TransactionType,E.ProcessingAmount,E.PrincipalReceived,E.InterestReceived],function(e){e.TransactionId="TransactionId",e.Date="Date",e.Details="Details",e.Turnover="Turnover",e.Balance="Balance",e.Currency="Currency"}(x||(x={}));var A=function(e){function t(){var e,a;Object(d.a)(this,t);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return(a=Object(f.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(i)))).currency=n.EUR,a}return Object(h.a)(t,e),Object(p.a)(t,[{key:"parseASFile",value:function(e){var a=w(e),r=O.a.utils.sheet_to_json(a,{header:t.ASFileColumnHeaders,raw:!1,blankrows:!1,defval:0,range:1});this.transactionLog=r}},{key:"getTransaction",value:y.a.mark(function e(){var t,a,r,n,i,c,o,l;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=!0,a=!1,r=void 0,e.prev=3,n=this.transactionLog[Symbol.iterator]();case 5:if(t=(i=n.next()).done){e.next=14;break}return c=i.value,o=R()(c[x.Date],"YYYY-MM-DD HH:mm:ss"),l=I(o),e.next=11,l;case 11:t=!0,e.next=5;break;case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(3),a=!0,r=e.t0;case 20:e.prev=20,e.prev=21,t||null==n.return||n.return();case 23:if(e.prev=23,!a){e.next=26;break}throw r;case 26:return e.finish(23);case 27:return e.finish(20);case 28:case"end":return e.stop()}},e,this,[[3,16,20,28],[21,,23,27]])})},{key:"getNewBaseResultFactory",value:function(){return{deposit:{},extraReceived:{},feesPaid:{},interestReceived:{},principalReceived:{},withdrawal:{}}}}],[{key:"isPlatformFileValid",value:function(e){return e.includes(t.platformFilenameSubstring)&&e.endsWith(t.platformFileType)}}]),t}(T);A.platform=i.MINTOS,A.platformFilenameSubstring="account-statement",A.platformFileType=r.XLSX,A.ASFileColumnHeaders=[x.TransactionId,x.Date,x.Details,x.Turnover,x.Balance,x.Currency];var C=function(e){function t(){return Object(d.a)(this,t),Object(f.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(p.a)(t,[{key:"onLoadHandler",value:function(e,t){this.props.onRawFileUploaded(e.target.result,t)}},{key:"handleDragOver",value:function(e){e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy"}},{key:"handleFileSelect",value:function(e){e.stopPropagation(),e.preventDefault();var t=e.dataTransfer.files;this.onLoadHandler=this.onLoadHandler.bind(this);var a=!0,r=!1,n=void 0;try{for(var i,c=t[Symbol.iterator]();!(a=(i=c.next()).done);a=!0){k(i.value,this.onLoadHandler)}}catch(o){r=!0,n=o}finally{try{a||null==c.return||c.return()}finally{if(r)throw n}}}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{id:"drop_zone",onDragOver:function(t){e.handleDragOver(t)},onDrop:function(t){return e.handleFileSelect(t)}},"Drop files here")}}]),t}(o.a.Component),L=function(e){var t=e.platformData.getPlatformTotals();return o.a.createElement("div",null,o.a.createElement("h2",null,"Zonky - web statistics"),o.a.createElement("h4",null,"Vyd\u011bl\xe1no :",t.interestReceived.interestReceived.add(t.interestReceived.penaltyReceived).subtract(t.feesPaid.plaformFeePaid).subtract(t.feesPaid.secondaryMarketFeePaid).toFormat()),o.a.createElement("h4",null,"Zaplaceno na poplatc\xedch:",t.feesPaid.plaformFeePaid.add(t.feesPaid.secondaryMarketFeePaid).toFormat()),o.a.createElement("h4",null,"\xdarok zaplacen\xfd:",t.interestReceived.interestReceived.toFormat()),o.a.createElement("h4",null,"Pokuty:",t.interestReceived.penaltyReceived.toFormat()))},M=function(e){var t=e.platformData.getPortfolioTotals();return o.a.createElement("div",null,o.a.createElement("h2",null,"P2Folio Totals"),o.a.createElement("h4",null,"Deposit:",t.deposit.toFormat()),o.a.createElement("h4",null,"Withdrawal:",t.withdrawal.toFormat()),o.a.createElement("h4",null,"Principal received:",t.principalReceived.toFormat()),o.a.createElement("h4",null,"Interests:",t.interestReceived.toFormat()),o.a.createElement("h4",null,"Fees paid:",t.feesPaid.toFormat()),o.a.createElement("h4",null,"Extra received:",t.extraReceived.toFormat()))},Y=function(e){var t;return e.platformData instanceof S&&(t=o.a.createElement(L,{platformData:e.platformData})),o.a.createElement("div",null,o.a.createElement(M,{platformData:e.platformData}),t)},H=function(e){function t(){return Object(d.a)(this,t),Object(f.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("table",{className:"ui celled table",id:"students"},o.a.createElement("thead",null,o.a.createElement("tr",null,this.renderTableHeader())),o.a.createElement("tbody",null,this.renderTableData())))}},{key:"renderTableData",value:function(){return this.props.platformData.monthlyResults.length>0?this.props.platformData.monthlyResults.map(function(e,t){for(var a={deposit:void 0,withdrawal:void 0,feesPaid:void 0,extraReceived:void 0,interestReceived:void 0},r=0,n=Object.entries(e.result);r<n.length;r++)for(var i=n[r],c=Object(P.a)(i,2),l=c[0],s=c[1],u=0,d=Object.entries(s);u<d.length;u++){var p=d[u],f=Object(P.a)(p,2)[1];a[l]?a[l].add(f):a[l]=f}return o.a.createElement("tr",{key:t},o.a.createElement("td",null,e.month.format("MMM YYYY")),o.a.createElement("td",null,a.deposit?a.deposit.toFormat():""),o.a.createElement("td",null,a.withdrawal?a.withdrawal.toFormat():""),o.a.createElement("td",null,a.interestReceived?a.interestReceived.toFormat():""),o.a.createElement("td",null,a.feesPaid?a.feesPaid.toFormat():""),o.a.createElement("td",null,a.extraReceived?a.extraReceived.toFormat():""))}):o.a.createElement("tr",{key:0})}},{key:"renderTableHeader",value:function(){return["date","deposit","withdrawal","interestReceived","feesPaid","extraReceived"].map(function(e,t){return o.a.createElement("th",{key:t},e.toUpperCase())})}}]),t}(o.a.Component),N=function(e){return o.a.createElement("div",null,o.a.createElement(Y,{platformData:e.platformData}),o.a.createElement(H,{platformData:e.platformData}))},Z=function(e){var t=e.portfolioPlatforms.map(function(e,t){return o.a.createElement(N,{key:t,platformData:e})});return o.a.createElement("div",{className:"platform-list"},t)},U=function(e){function t(){return Object(d.a)(this,t),Object(f.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(p.a)(t,[{key:"onLoadHandler",value:function(e,t){this.props.onRawFileUploaded(e.target.result,t)}},{key:"onFileInputChange",value:function(e){var t=e.target.files;this.onLoadHandler=this.onLoadHandler.bind(this);var a=!0,r=!1,n=void 0;try{for(var i,c=t[Symbol.iterator]();!(a=(i=c.next()).done);a=!0){k(i.value,this.onLoadHandler)}}catch(o){r=!0,n=o}finally{try{a||null==c.return||c.return()}finally{if(r)throw n}}}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"ui segment"},o.a.createElement("input",{type:"file",multiple:!0,onChange:function(t){e.onFileInputChange(t)}}))}}]),t}(o.a.Component),K=function(e){function t(){var e,a;Object(d.a)(this,t);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(a=Object(f.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(n)))).state={portfolioPlatforms:[]},a}return Object(h.a)(t,e),Object(p.a)(t,[{key:"handleUploadedRawFile",value:function(e,t){try{var a;switch(function(e){if(A.isPlatformFileValid(e))return A.platform;if(D.isPlatformFileValid(e))return D.platform;if(S.isPlatformFileValid(e))return S.platform;throw new Error("unknown file")}(t)){case i.MINTOS:a=new A;break;case i.TWINO:a=new D;break;case i.ZONKY:a=new S;break;default:throw Error("unknown platform")}a.parseASFile(e),a.processTransactions(),this.setState(function(e){return{portfolioPlatforms:[].concat(Object(u.a)(e.portfolioPlatforms),[a])}})}catch(r){console.log(r)}}},{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement("div",null,o.a.createElement(U,{onRawFileUploaded:function(t,a){return e.handleUploadedRawFile(t,a)}}),o.a.createElement(C,{onRawFileUploaded:function(t,a){return e.handleUploadedRawFile(t,a)}}),"Account statements: ",this.state.portfolioPlatforms?this.state.portfolioPlatforms.length:"0"),o.a.createElement("div",null,o.a.createElement(Z,{portfolioPlatforms:this.state.portfolioPlatforms})))}}]),t}(o.a.Component);s.a.render(o.a.createElement(K,null),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.9ab1760e.chunk.js.map